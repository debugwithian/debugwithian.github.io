<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Rene Benje Ian Diamante Portfolio</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@600;700&family=Roboto:wght@400;500&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
:root{--primary:#0d6efd;--soft1:#f7f9fb;--soft2:#eaf1f7}
html,body{height:100%}
body{font-family:'Roboto',sans-serif;background:linear-gradient(120deg,var(--soft1),var(--soft2));background-size:200% 200%;color:#333;overflow-x:hidden}
h1,h2,h3,h4,h5{font-family:'Poppins',sans-serif;color:#1c1c1c}
.section-title{margin-bottom:2rem;position:relative}
.section-title::after{content:'';display:block;width:60px;height:3px;background-color:var(--primary);margin-top:0.5rem;border-radius:2px}
.card-hover{transition:all 0.3s ease}
.card-hover:hover{transform:translateY(-5px);box-shadow:0 12px 20px rgba(0,0,0,0.12)}
.cv-btn{position:fixed;bottom:30px;right:30px;background:var(--primary);color:#fff;padding:0.8rem 1.2rem;border-radius:50px;font-weight:600;display:flex;align-items:center;gap:0.5rem;box-shadow:0 4px 12px rgba(0,0,0,0.18);z-index:1100;text-decoration:none}
.cv-btn:hover{transform:scale(1.05)}
.sidebar{position:sticky;top:0;height:100vh;background:#fff;padding:2rem 1rem;border-right:1px solid #e6e6e6}
.sidebar a{display:block;margin:1rem 0;color:#555;font-weight:500;transition:color 0.2s;text-decoration:none}
.sidebar a:hover{color:var(--primary)}
.timeline{position:relative;padding-left:2rem}
.timeline::before{content:'';position:absolute;left:0.75rem;top:0;bottom:0;width:4px;background:linear-gradient(180deg,var(--primary),#6c757d);border-radius:2px}
.timeline-item{position:relative;margin-left:20px}
.timeline-item::before{content:'';position:absolute;left:-35px;top:1rem;width:15px;height:15px;background:var(--primary);border-radius:50%;box-shadow:0 0 0 3px #fff;transition:all 0.25s ease}
.timeline-item:hover::before{transform:scale(1.2);background:#0056b3}
#scoreCounter{position:fixed;top:18px;right:18px;background:rgba(13,110,253,0.95);color:#fff;padding:8px 12px;border-radius:999px;font-weight:700;z-index:1200;display:flex;align-items:center;gap:8px;box-shadow:0 10px 30px rgba(13,110,253,0.18)}
#gameArea{position:fixed;left:0;top:0;width:100%;height:100%;pointer-events:none;z-index:1050}
.gameIcon{position:absolute;width:48px;height:48px;border-radius:10px;display:flex;align-items:center;justify-content:center;font-size:20px;color:#fff;cursor:pointer;pointer-events:auto;box-shadow:0 8px 20px rgba(0,0,0,0.15);transform:translate3d(0,0,0);transition:transform 0.12s ease}
.popupPoints{position:fixed;font-weight:700;color:#111;pointer-events:none;z-index:1600}
#rbidRow{display:flex;align-items:center;gap:10px}
#playBadge{background:transparent;border:none;color:var(--primary);font-size:20px;cursor:pointer;padding:6px;border-radius:6px}
#playBadge:hover{background:rgba(13,110,253,0.06)}
#aiWidget{position:fixed;right:30px;bottom:110px;width:360px;max-width:calc(100% - 40px);background:linear-gradient(180deg,#fff,#f8fbff);border-radius:12px;box-shadow:0 18px 40px rgba(13,110,253,0.12);z-index:1150;overflow:hidden;display:flex;flex-direction:column;border:1px solid rgba(13,110,253,0.06);font-size:14px}
.ai-header{display:flex;align-items:center;gap:10px;padding:12px 14px;background:rgba(13,110,253,0.06);border-bottom:1px solid rgba(0,0,0,0.03)}
.ai-header h5{margin:0;font-size:15px}
.ai-body{padding:10px;height:300px;overflow:auto;display:flex;flex-direction:column;gap:8px}
.ai-footer{padding:10px;border-top:1px solid rgba(0,0,0,0.03);display:flex;gap:8px;align-items:center}
.ai-input{flex:1;padding:8px 10px;border-radius:8px;border:1px solid #ddd;outline:none}
.ai-btn{padding:8px 10px;border-radius:8px;border:none;background:var(--primary);color:#fff;font-weight:600;cursor:pointer}
.ai-msg{max-width:85%;padding:8px 10px;border-radius:10px;font-size:13px;line-height:1.3}
.ai-msg.user{margin-left:auto;background:var(--primary);color:#fff;border-bottom-right-radius:2px}
.ai-msg.bot{margin-right:auto;background:#f1f6ff;color:#222;border-bottom-left-radius:2px}
@media(max-width:768px){.sidebar{display:none} .ai-header img{display:none} .cv-btn{right:12px} #aiWidget{right:12px;left:12px;width:auto;bottom:110px}}
</style>
</head>
<body>
<a href="Rene_Diamante_CV.pdf" class="cv-btn" download><i class="fas fa-download"></i> Download CV</a>
<div id="scoreCounter"><i class="fas fa-star"></i> Score: <span id="score">0</span></div>
<div id="gameArea"></div>
<div class="container-fluid">
  <div class="row">
    <nav class="col-md-2 sidebar d-none d-md-block">
      <div id="rbidRow">
        <h3 class="fw-bold mb-0">RBID</h3>
        <button id="playBadge" aria-label="Play game"><i class="fas fa-gamepad"></i></button>
      </div>
      <a href="#about"><i class="fas fa-user me-2"></i>About</a>
      <a href="#tech"><i class="fas fa-laptop-code me-2"></i>Tech Stack</a>
      <a href="#projects"><i class="fas fa-briefcase me-2"></i>Projects</a>
      <a href="#experience"><i class="fas fa-history me-2"></i>Experience</a>
      <a href="#contact"><i class="fas fa-envelope me-2"></i>Contact</a>
    </nav>
    <main class="col-md-10 col-12 py-4 px-5">
      <section id="about" class="my-5">
        <h2 class="section-title">About Me</h2>
        <p class="lead">I'm <strong>Rene Benje Ian Diamante</strong>, a Senior Software Full Stack Engineer with more than 10 years of experience in Web Development, Microservices, PHP, Java, Python, and Salesforce integration. I specialize in creating dynamic reports, leading global development teams, and building scalable, high-performance web solutions that drive business growth and efficiency.</p>
        <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4 mt-4">
          <div class="col">
            <div class="card card-hover h-100 text-center p-3">
              <i class="fas fa-code fa-3x mb-3 text-primary"></i>
              <h5>Web Development</h5>
              <p>PHP, Java, Python, JavaScript frameworks, HTML/CSS, React.js, Laravel, Symfony.</p>
            </div>
          </div>
          <div class="col">
            <div class="card card-hover h-100 text-center p-3">
              <i class="fas fa-plug fa-3x mb-3 text-primary"></i>
              <h5>Microservices & API</h5>
              <p>Maintained 70+ microservices, Salesforce API integration, Email notifications, and automation.</p>
            </div>
          </div>
          <div class="col">
            <div class="card card-hover h-100 text-center p-3">
              <i class="fas fa-chart-line fa-3x mb-3 text-primary"></i>
              <h5>Data & Reporting</h5>
              <p>Data visualization using Highcharts, Konva JS automation builder, and ARIA-compliant reporting.</p>
            </div>
          </div>
          <div class="col">
            <div class="card card-hover h-100 text-center p-3">
              <i class="fas fa-users fa-3x mb-3 text-primary"></i>
              <h5>Team Leadership</h5>
              <p>Directed multiple micro-teams across APAC, EMEA, and LATAM, ensuring smooth project execution.</p>
            </div>
          </div>
          <div class="col">
            <div class="card card-hover h-100 text-center p-3">
              <i class="fas fa-database fa-3x mb-3 text-primary"></i>
              <h5>Cloud & DB</h5>
              <p>AWS DynamoDB, Elasticsearch, MySQL, server instance management, and cloud infrastructure.</p>
            </div>
          </div>
        </div>
      </section>
      <section id="tech" class="my-5">
        <h2 class="section-title">Tech Stack</h2>
        <div class="d-flex flex-wrap gap-3 mt-3">
          <span class="badge bg-primary text-white p-2"><i class="fab fa-php"></i> PHP / Symfony / Laravel</span>
          <span class="badge bg-primary text-white p-2"><i class="fab fa-java"></i> Java / Spring Boot</span>
          <span class="badge bg-primary text-white p-2"><i class="fab fa-python"></i> Python / Flask / Django</span>
          <span class="badge bg-primary text-white p-2"><i class="fab fa-js-square"></i> JavaScript / React.js / jQuery</span>
          <span class="badge bg-primary text-white p-2"><i class="fas fa-database"></i> MySQL / SQL</span>
          <span class="badge bg-primary text-white p-2"><i class="fas fa-chart-line"></i> Highcharts / Konva JS</span>
          <span class="badge bg-primary text-white p-2"><i class="fab fa-salesforce"></i> Salesforce Integration</span>
          <span class="badge bg-primary text-white p-2"><i class="fas fa-plug"></i> API Development</span>
          <span class="badge bg-primary text-white p-2"><i class="fas fa-chart-pie"></i> DataDog Metrics</span>
        </div>
      </section>
      <section id="experience" class="py-5">
        <div class="container">
          <h2 class="section-title">Experience</h2>
          <div class="timeline position-relative">
            <div class="timeline-item mb-4 p-4 bg-light rounded shadow-sm">
              <div class="d-flex justify-content-between align-items-center">
                <h4 class="fw-semibold mb-0">Sr. Software Engineer — Indeed</h4>
                <span class="text-muted small">Mar 2021 – Present</span>
              </div>
              <button class="btn btn-link text-decoration-none mt-2 p-0 text-primary" data-bs-toggle="collapse" data-bs-target="#indeedDetails"> View Details </button>
              <div id="indeedDetails" class="collapse mt-2">
                <ul class="mb-0">
                  <li>Expertly manage and generate DataDog Metrics for enhanced reporting capabilities.</li>
                  <li>Skillfully modify and update the Indeed CRM to optimize customer relationship management.</li>
                  <li>Oversee server instances on MARVIN ensuring robust, scalable infrastructure.</li>
                  <li>Develop and maintain a reliable API for Email Alert Notifications.</li>
                  <li>Architect specialized APIs for Indeed CRM integration.</li>
                  <li>Administer AdCentral Services repositories and maintain 70+ microservices.</li>
                  <li>Ensure A11Y / ARIA compliance and web accessibility across multiple sites.</li>
                  <li>Lead multi-regional teams across APAC, EMEA, and LATAM.</li>
                  <li>Reverse-engineer Salesforce systems and maintain cross-stack microservices (PHP, Java, Python).</li>
                </ul>
              </div>
            </div>
            <div class="timeline-item mb-4 p-4 bg-light rounded shadow-sm">
              <div class="d-flex justify-content-between align-items-center">
                <h4 class="fw-semibold mb-0">Sr. PHP Developer — Zymplify</h4>
                <span class="text-muted small">Aug 2019 – Oct 2024</span>
              </div>
              <button class="btn btn-link text-decoration-none mt-2 p-0 text-primary" data-bs-toggle="collapse" data-bs-target="#zymplifyDetails"> View Details </button>
              <div id="zymplifyDetails" class="collapse mt-2">
                <ul class="mb-0">
                  <li>Developed client-specific functionalities, improving UX and efficiency.</li>
                  <li>Created dashboards and automation builders using Highcharts and Konva.js.</li>
                  <li>Integrated multimedia from Canva, Pexels, Pixabay, and Unsplash.</li>
                  <li>Optimized SQL performance and ORM-based APIs with Symfony & native PHP.</li>
                  <li>Conducted penetration testing, handled bugs, and managed Zym.ai platform.</li>
                </ul>
              </div>
            </div>
            <div class="timeline-item mb-4 p-4 bg-light rounded shadow-sm">
              <div class="d-flex justify-content-between align-items-center">
                <h4 class="fw-semibold mb-0">Backend PHP Developer — Shore Business Solution (Yomojo)</h4>
                <span class="text-muted small">Jun 2018 – Jul 2019</span>
              </div>
              <button class="btn btn-link text-decoration-none mt-2 p-0 text-primary" data-bs-toggle="collapse" data-bs-target="#shoreDetails"> View Details </button>
              <div id="shoreDetails" class="collapse mt-2">
                <ul class="mb-0">
                  <li>Maintained Laravel and CodeIgniter apps for Family Eye and Yomojo.</li>
                  <li>Integrated AWS DynamoDB and Elasticsearch for log storage.</li>
                  <li>Developed push notifications (GCM/APN) and API reporting tools.</li>
                  <li>Managed Palo Alto Firewall via API and optimized add-on features.</li>
                </ul>
              </div>
            </div>
            <div class="timeline-item mb-4 p-4 bg-light rounded shadow-sm">
              <div class="d-flex justify-content-between align-items-center">
                <h4 class="fw-semibold mb-0">Integration Support Engineer II</h4>
                <span class="text-muted small">Nov 2017 – Jun 2018</span>
              </div>
              <button class="btn btn-link text-decoration-none mt-2 p-0 text-primary" data-bs-toggle="collapse" data-bs-target="#integrationDetails"> View Details </button>
              <div id="integrationDetails" class="collapse mt-2">
                <ul class="mb-0">
                  <li>Created and tested plugins for major e-commerce platforms (Magento, PrestaShop, OpenCart).</li>
                  <li>Ensured API compatibility and optimized recurring payment systems.</li>
                  <li>Developed documentation and integration guides for developers.</li>
                </ul>
              </div>
            </div>
            <div class="timeline-item mb-4 p-4 bg-light rounded shadow-sm">
              <div class="d-flex justify-content-between align-items-center">
                <h4 class="fw-semibold mb-0">IT Section Supervisor & App Developer — BACIWA</h4>
                <span class="text-muted small">Jan 2016 – Jul 2017</span>
              </div>
              <button class="btn btn-link text-decoration-none mt-2 p-0 text-primary" data-bs-toggle="collapse" data-bs-target="#baciwaDetails"> View Details </button>
              <div id="baciwaDetails" class="collapse mt-2">
                <ul class="mb-0">
                  <li>Developed Android billing & document management systems.</li>
                  <li>Implemented audit trails, privacy levels, and automation tools.</li>
                  <li>Managed network infrastructure, firewalls, and IT team supervision.</li>
                  <li>Contributed to ISO process compliance and citizen charter creation.</li>
                </ul>
              </div>
            </div>
            <div class="timeline-item mb-4 p-4 bg-light rounded shadow-sm">
              <div class="d-flex justify-content-between align-items-center">
                <h4 class="fw-semibold mb-0">Intern Web Developer — Kimberly Clark</h4>
                <span class="text-muted small">Nov 2014 – Feb 2015</span>
              </div>
              <button class="btn btn-link text-decoration-none mt-2 p-0 text-primary" data-bs-toggle="collapse" data-bs-target="#kcDetails"> View Details </button>
              <div id="kcDetails" class="collapse mt-2">
                <ul class="mb-0">
                  <li>Developed Digital Services Dashboard integrating Google Maps & Charts.</li>
                  <li>Built MVC-based web apps using C# and CSHTML for APAC operations.</li>
                  <li>Implemented algorithms and scheduling techniques for process optimization.</li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </section>
      <section id="contact" class="my-5">
        <h2 class="section-title">Contact</h2>
        <p>Email: <a href="mailto:renebenjeiandiamante@gmail.com">renebenjeiandiamante@gmail.com</a></p>
        <p>Phone: <a href="tel:+639560522007">+63 9952406425</a> / <a href="tel:+639619477036">+63 9619477036</a></p>
        <p>LinkedIn: <a href="https://www.linkedin.com/in/the1geek1/" target="_blank">https://www.linkedin.com/in/the1geek1/</a></p>
        <p>Address: 22B Camia St Tomasa Subd Brgy Ususan, Taguig City, Philippines</p>
      </section>
      <footer class="text-center py-3 border-top mt-5">&copy; 2025 Rene Benje Ian Diamante. All Rights Reserved.</footer>
    </main>
  </div>
</div>
<div id="aiWidget">
  <div class="ai-header">
    <img src="https://cdn.jsdelivr.net/gh/twitter/twemoji@14.0.2/assets/72x72/1f916.png" alt="bot" width="28">
    <div style="flex:1">
      <h5 style="margin-bottom:0">Groq Ask Me AI</h5>
      <div style="font-size:12px;color:#4b5563">Ask me about projects, tech, or your resume</div>
    </div>
    <div style="text-align:right">
      <button id="aiMin" class="btn btn-sm btn-outline-secondary" title="Minimize"><i class="fas fa-chevron-down"></i></button>
    </div>
  </div>
  <div class="ai-body" id="aiBody" tabindex="0" role="log" aria-live="polite">
    <div class="ai-msg bot">Hi! Ask me anything about this portfolio or tech. Click the gamepad on RBID to play a small tech icon mini-game.</div>
  </div>
  <div class="ai-footer">
    <input id="aiInput" class="ai-input" placeholder="Type a question (e.g. 'Explain your Zymplify work')">
    <button id="aiSend" class="ai-btn"><i class="fas fa-paper-plane"></i></button>
  </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script src="config.js"></script>
<script>
const GROQ_ENDPOINT = "https://api.groq.com/openai/v1/chat/completions";
const MODEL = "llama-3.1-8b-instant";
let score = 0;
const scoreEl = document.getElementById("score");
const gameArea = document.getElementById("gameArea");
const techIcons = [
  {label:"HTML", color:"#E44D26", symbol:"<>"}, 
  {label:"CSS", color:"#1572B6", symbol:"{}"}, 
  {label:"JS", color:"#F7DF1E", symbol:"JS"}, 
  {label:"React", color:"#61DAFB", symbol:"⚛"}, 
  {label:"Node", color:"#339933", symbol:"⬢"},
  {label:"TS", color:"#3178C6", symbol:"TS"}
];
function rand(min,max){return Math.random()*(max-min)+min}
function placeIcon(icon){
  const el = document.createElement("div");
  el.className = "gameIcon";
  el.setAttribute("data-label", icon.label);
  el.innerHTML = `<span style="pointer-events:none;font-weight:700">${icon.symbol}</span>`;
  el.style.background = icon.color;
  const size = Math.floor(rand(40,64));
  el.style.width = size + "px";
  el.style.height = size + "px";
  el.style.left = rand(20, window.innerWidth - 100) + "px";
  el.style.top = rand(120, window.innerHeight - 160) + "px";
  el.style.opacity = "0";
  gameArea.appendChild(el);
  el.animate([{transform:"scale(0.8)", opacity:0},{transform:"scale(1)", opacity:1}], {duration:200, fill:"forwards"});
  let vx = rand(-1.0,1.0);
  let vy = rand(-0.8,0.8);
  const move = setInterval(()=>{
    if(!el.parentElement){ clearInterval(move); return }
    const rect = el.getBoundingClientRect();
    if(rect.left < 8 || rect.right > window.innerWidth-8) vx = -vx;
    if(rect.top < 80 || rect.bottom > window.innerHeight-80) vy = -vy;
    el.style.left = (rect.left + vx) + "px";
    el.style.top = (rect.top + vy) + "px";
  },20);
  el.addEventListener("mouseenter", ()=> el.style.transform = "scale(1.08)");
  el.addEventListener("mouseleave", ()=> el.style.transform = "scale(1)");
  el.addEventListener("click",(e)=>{
    e.stopPropagation();
    clearInterval(move);
    const rect = el.getBoundingClientRect();
    const popup = document.createElement("div");
    popup.className = "popupPoints";
    popup.style.left = (rect.left + rect.width/2) + "px";
    popup.style.top = rect.top + "px";
    popup.style.fontSize = "16px";
    popup.innerText = "+15";
    document.body.appendChild(popup);
    popup.animate([{transform:"translateY(0)", opacity:1},{transform:"translateY(-60px)", opacity:0}], {duration:700,easing:"cubic-bezier(.2,.8,.2,1)"});
    setTimeout(()=> popup.remove(),760);
    el.animate([{transform:"scale(1.2)", opacity:1},{transform:"scale(0.2)", opacity:0}], {duration:300, fill:"forwards"});
    setTimeout(()=> el.remove(),320);
    score += 15;
    scoreEl.innerText = score;
    localStorage.setItem("rbid_minigame_score", score);
    burstEffect(rect.left + rect.width/2, rect.top + rect.height/2);
  });
  setTimeout(()=>{ try{ if(el.parentElement) el.remove() }catch(e){} }, rand(7000,15000));
}
function burstEffect(x,y){
  for(let i=0;i<10;i++){
    const p = document.createElement("div");
    p.className = "gameIcon";
    p.style.width = "10px";
    p.style.height = "12px";
    p.style.left = x + "px";
    p.style.top = y + "px";
    p.style.borderRadius = "3px";
    p.style.background = `hsl(${Math.floor(rand(0,360))},80%,60%)`;
    p.style.boxShadow = "none";
    p.style.pointerEvents = "none";
    document.body.appendChild(p);
    const angle = rand(0,Math.PI*2);
    const dist = rand(40,120);
    const tx = x + Math.cos(angle)*dist;
    const ty = y + Math.sin(angle)*dist;
    p.animate([{transform:"translate(0,0) rotate(0)", opacity:1},{transform:`translate(${tx-x}px,${ty-y}px) rotate(${rand(180,720)}deg)`, opacity:0}], {duration:900,easing:"cubic-bezier(.2,.8,.2,1)"});
    setTimeout(()=> p.remove(),950);
  }
}
let spawnInterval = null;
let gameTimeout = null;
function startGame(){
  if(spawnInterval) return;
  const rounds = 22;
  let spawned = 0;
  spawnInterval = setInterval(()=>{
    if(spawned >= rounds){ clearInterval(spawnInterval); spawnInterval = null; return }
    const icon = techIcons[Math.floor(Math.random()*techIcons.length)];
    placeIcon(icon);
    spawned++;
  }, 600);
  gameTimeout = setTimeout(()=>{ clearInterval(spawnInterval); spawnInterval = null }, 24000);
}
const playBadge = document.getElementById("playBadge");

function stopGame() {
  if (spawnInterval) {
    clearInterval(spawnInterval);
    spawnInterval = null;
  }
  if (gameTimeout) {
    clearTimeout(gameTimeout);
    gameTimeout = null;
  }
  const icons = document.querySelectorAll(".gameIcon");
  icons.forEach(icon => icon.remove());
  playBadge.style.color = "#0d6efd"; // blue when stopped
}

function startGame() {
  if (spawnInterval) return; // already running
  const rounds = 22;
  let spawned = 0;

  spawnInterval = setInterval(() => {
    if (spawned >= rounds) { 
      clearInterval(spawnInterval); 
      spawnInterval = null; 
      playBadge.style.color = "#0d6efd"; // back to blue
      return;
    }
    const icon = techIcons[Math.floor(Math.random() * techIcons.length)];
    placeIcon(icon);
    spawned++;
  }, 600);

  gameTimeout = setTimeout(() => {
    clearInterval(spawnInterval);
    spawnInterval = null;
    playBadge.style.color = "#0d6efd"; // back to blue
  }, 24000);
  playBadge.style.color = "#dc3545"; // red when running
}

playBadge.addEventListener("click", () => {
  if (spawnInterval) {
    stopGame();
  } else {
    startGame();
  }
});
const aiBody = document.getElementById("aiBody");
function appendMessage(text, who){
  const div = document.createElement("div");
  div.className = "ai-msg " + (who==="user" ? "user" : "bot");
  div.innerText = text;
  aiBody.appendChild(div);
  aiBody.scrollTop = aiBody.scrollHeight;
}
async function getPrompt() {
  try {
    const response = await fetch('prompt.txt');
    if (!response.ok) throw new Error('Failed to load prompt.txt');
    const text = await response.text();
    return text.trim();
  } catch (err) {
    console.error(err);
    return "Default prompt text"; // fallback
  }
} 
async function callGroq(prompt){
  if(!GROQ_API_KEY || GROQ_API_KEY.includes("REPLACE")){
    appendMessage("Groq API key not provided. Replace the placeholder in the script to test.", "bot");
    return null;
  }
  const userPrompt = await getPrompt();
  const payload = { model: MODEL, messages: [{ role: "system", content: userPrompt }, { role: "user", content: prompt }], max_tokens: 700, temperature: 0.2 };
  try{
    const res = await fetch(GROQ_ENDPOINT, { method: "POST", headers: { "Content-Type": "application/json", "Authorization": "Bearer " + GROQ_API_KEY }, body: JSON.stringify(payload) });
    if(!res.ok){ appendMessage("Error from Groq: " + res.status, "bot"); return null }
    const json = await res.json();
    const content = (json.choices && json.choices[0] && json.choices[0].message && json.choices[0].message.content) || JSON.stringify(json);
    return content;
  }catch(e){
    appendMessage("Network error contacting Groq.", "bot");
    return null;
  }
}
const aiInput = document.getElementById("aiInput");
const aiSend = document.getElementById("aiSend");
aiSend.addEventListener("click", async ()=>{
  const q = aiInput.value.trim();
  if(!q) return;
  appendMessage(q, "user");
  aiInput.value = "";
  appendMessage("Thinking...", "bot");
  const ans = await callGroq(q);
  const bots = aiBody.querySelectorAll(".ai-msg.bot");
  if(bots.length) bots[bots.length-1].remove();
  if(ans === null){ appendMessage("No response.", "bot"); return }
  appendMessage(ans, "bot");
});
aiInput.addEventListener("keydown", (e)=>{ if(e.key === "Enter") aiSend.click() });
const aiMin = document.getElementById("aiMin");
aiMin.addEventListener("click", ()=>{
  const body = document.getElementById("aiBody");
  const footer = document.querySelector(".ai-footer");
  if(body.style.display === "none"){ body.style.display = "flex"; footer.style.display = "flex"; aiMin.innerHTML = '<i class="fas fa-chevron-down"></i>'; } else { body.style.display = "none"; footer.style.display = "none"; aiMin.innerHTML = '<i class="fas fa-chevron-up"></i>'; }
});
document.addEventListener("visibilitychange", ()=>{ if(document.hidden) localStorage.setItem("rbid_minigame_score", score) });
</script>
</body>
</html>
